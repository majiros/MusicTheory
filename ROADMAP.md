# MusicTheory プロジェクト ロードマップ

## 現在の状態 (2025年10月4日)

### ✅ 完了済み機能

#### コア機能
- ✅ Pitch / Interval / Scale / Chord モデル
- ✅ Roman Numeral 解析と Tonal Function（I/ii/IV/V → T/S/D）
- ✅ Triad 転回形（6/64）と Seventh 転回形（7/65/43/42）
- ✅ 二次機能（V/x, vii°/x）の完全サポート
- ✅ 増六和音（It6, Fr43, Ger65）
- ✅ Neapolitan（bII, bII6）with enforceN6 オプション
- ✅ 借用和音（bVI, bVII, bIII, bII）+ 7th アドバイザリ警告
- ✅ Six-four 分類（Cadential, Passing, Pedal）
- ✅ カデンツ解析（PAC/IAC/Half/Deceptive/Plagal）
- ✅ モジュレーション推定（stable/permissive プリセット）

#### CLI & JSON
- ✅ CLI ツール with 決定的JSON出力
- ✅ JSON スキーマ（main + util:roman/dur/pcs）
- ✅ 警告/エラーシステム（warnings/errors フィールド）
- ✅ Roman入力パーサー（転回/7th/二次/増六対応）

#### 品質保証
- ✅ **カバレッジ: 80.5%** (ゲート: ≥75%)
- ✅ テスト: 277 passed, 1 skipped
- ✅ CI/CD: GitHub Actions（多OS対応）
- ✅ GitHub Pages: 公開カバレッジレポート
- ✅ ドキュメント: README, UserGuide, PAC設計文書

#### インフラ
- ✅ VS Code タスク（ビルド/テスト/カバレッジ）
- ✅ カバレッジスクリプト（ローカル/公開取得）
- ✅ ベンチマークサンプル
- ✅ WPF サンプル（NoteValueZoom）

### 📊 プロジェクト統計

- **C# ファイル**: 142個
- **総コード行数**: 13,771行
- **テストカバレッジ**: 80.5% (Line), 69.2% (Branch), 73.3% (Method)
- **ユニットテスト**: 278件（277合格, 1スキップ）
- **カバレッジゲート**: ≥75% (PASS ✅)

---

## 🎯 次期開発目標

### Phase 1: 品質向上（短期）

#### カバレッジ向上
- [ ] 目標: **85%以上**
- [ ] 未カバー領域の分析と優先順位付け
- [ ] 境界条件テストの追加
- [ ] エッジケースの網羅

#### ドキュメント強化
- [ ] API リファレンスの自動生成（DocFX検討）
- [ ] チュートリアル追加（段階的学習パス）
- [ ] コード例の拡充
- [ ] FAQ セクション追加

#### パフォーマンス最適化
- [ ] ベンチマーク基準値の設定
- [ ] ホットパスの最適化
- [ ] メモリアロケーション削減
- [ ] キャッシング戦略の実装

### Phase 2: Harmony機能拡張（中期）

#### 和声進行ルール強化
- [ ] 声部進行規則の詳細チェック
  - [ ] 平行5度/8度の検出
  - [ ] 隠伏5度/8度の検出
  - [ ] 声域違反のチェック
  - [ ] 声部交差の検出
- [ ] 進行妥当性スコアリング
- [ ] 推奨代替進行の提案

#### モジュレーション推定の精緻化
- [ ] 調性確信度の可視化
- [ ] 転調タイプの分類（直接/準備/突然）
- [ ] ピボット和音の特定
- [ ] 実サンプル収集と閾値調整

#### カデンツ判定の洗練
- [ ] PAC/IAC 近似判定の閾値再検討
- [ ] Half cadence 抑制ルールの最適化
- [ ] Plagal cadence の分類強化
- [ ] カデンツ強度スコアの導入

### Phase 3: 新機能追加（長期）

#### Non-Functional Harmony
- [ ] 経過音（Passing tone）の分析
- [ ] 倚音（Appoggiatura）の検出
- [ ] 掛留音（Suspension）のサポート
- [ ] ペダルポイント（Pedal point）の識別

#### 和声外音の高度な処理
- [ ] 装飾音の分類
- [ ] 予備・解決パターンの検証
- [ ] メロディック分析との統合

#### 拡張和音
- [ ] 9th/11th/13th の完全サポート
- [ ] 変化音和音の拡充
- [ ] ジャズ和音の体系的サポート
- [ ] コンテンポラリー和声への対応

#### スケール・モード拡張
- [ ] エキゾチックスケールの追加
- [ ] モードミクスチャーの解析
- [ ] スケール推定の精度向上

---

## 🚀 将来の方向性

### アプリケーション開発

#### 楽譜制作ソフト（別リポジトリ推奨）
- **アーキテクチャ**: MusicTheory を基盤ライブラリとして参照
- **統合方法**: NuGetパッケージ / Git submodule / プロジェクト参照
- **開発戦略**: 
  1. Samples フォルダでプロトタイプ作成
  2. 成熟度に応じて専用リポジトリへ分離
  3. MusicTheory の公開API安定化

#### 想定されるアプリケーション例
- [ ] 楽譜エディタ（GUI）
- [ ] 和声解析ツール（ビジュアライゼーション）
- [ ] 音楽理論学習アプリ
- [ ] MIDI/MusicXML コンバータ
- [ ] リアルタイム和音認識

### エコシステム拡張
- [ ] NuGet パッケージ公開
- [ ] VS Code Extension 開発
- [ ] Web API サービス
- [ ] クラウドベース解析サービス

---

## 📅 マイルストーン

### v0.9（品質向上フェーズ）
- カバレッジ 85%達成
- ドキュメント完成度 90%
- パフォーマンスベンチマーク確立
- **目標期日**: TBD

### v1.0（安定版リリース）
- 全コア機能安定化
- 公開API凍結
- 完全なドキュメント
- NuGetパッケージ公開
- **目標期日**: TBD

### v1.x（機能拡張）
- Non-functional harmony サポート
- 高度な和声外音処理
- 拡張和音の完全サポート
- **目標期日**: TBD

### v2.0（次世代）
- ジャズ和声の完全対応
- リアルタイム解析
- Web API 公開
- エコシステム拡充
- **目標期日**: TBD

---

## 🤝 コントリビューション

現在は個人プロジェクトとして開発中です。将来的に以下の領域でのコントリビューションを歓迎する可能性があります：

- テストケースの追加
- ドキュメント改善
- バグ報告・修正
- 新機能の提案
- パフォーマンス最適化

---

## 📚 参考資料

- README.md - プロジェクト概要と使用方法
- Docs/UserGuide.md - ユーザーガイド
- Docs/PAC-and-LeadingTone.md - PAC設計の詳細
- CHANGELOG.md - 変更履歴

---

**Last Updated**: 2025年10月4日  
**Project Status**: Active Development  
**License**: TBD
